<mat-card>
  <mat-card-header>
    <mat-card-title>Voice Quiz</mat-card-title>
    @if (listening) {
      <mat-card-subtitle class="listening-banner">ðŸŽ¤  Listening...</mat-card-subtitle>
    }
    <mat-card-subtitle></mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <p>Answer the question by speaking.</p>
    <p>Quiz settings: ...coming soon</p>
    @if (currentQuestion){
      <p>Question: {{ currentQuestion.question }}</p>
      @if (userAnswer) {
        <p>You said: {{ userAnswer }}</p>
      }
      @if (feedback) {
        <p>Feedback: {{ feedback }}</p>
      } 
    }
  </mat-card-content>
  <mat-card-actions>
    <button mat-flat-button (click)="cancelQuiz()">Cancel</button>
    <button mat-button (click)="startQuiz()">Start</button>
  </mat-card-actions>
</mat-card>

@if (quizCompleted) {
  <mat-card>
    <mat-card-header>
      <mat-card-title>Quick Results</mat-card-title>
      <mat-card-subtitle>Score: {{score}} %</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <app-metric class="metric-results" [metrics]="metrics"></app-metric>
    </mat-card-content>
    @if (score && score < 100) {
      <mat-card-actions>
        <button mat-button (click)="startQuiz('retake')">Practice</button>
      </mat-card-actions>
    }
  </mat-card>
}
